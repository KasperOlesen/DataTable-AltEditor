!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,o){return e||(e=window),o&&o.fn.dataTable||(o=require("datatables.net")(e,o).$),t(o,e,e.document)}:t(jQuery,window,document)}(function(t,e,o,a){"use strict";var l=t.fn.dataTable,n=0,i=function(e,o){if(!l.versionCheck||!l.versionCheck("1.10.8"))throw"Warning: altEditor requires DataTables 1.10.8 or greater";this.c=t.extend(!0,{},l.defaults.altEditor,i.defaults,o),this.s={dt:new l.Api(e),namespace:".altEditor"+n++},this.dom={modal:t('<div class="dt-altEditor-handle"/>')},this._constructor()};return t.extend(i.prototype,{_constructor:function(){var e=this,a=this.s.dt;e.onAddRow=a.settings()[0].oInit.onAddRow,e.onDeleteRow=a.settings()[0].oInit.onDeleteRow,e.onEditRow=a.settings()[0].oInit.onEditRow,e.logRowChange=function(t,e){console.log("Table data changed and no AJAX call setup!"),console.log(t),e()},e.onAddRow=null==e.onAddRow?e.logRowChange:e.onAddRow,e.onDeleteRow=null==e.onDeleteRow?e.logRowChange:e.onDeleteRow,e.onEditRow=null==e.onEditRow?e.logRowChange:e.onEditRow,this._setup(),a.on("destroy.altEditor",function(){a.off(".altEditor"),t(a.table().body()).off(e.s.namespace),t(o.body).off(e.s.namespace)})},_setup:function(){var e=this,a=this.s.dt;t("body").append('<div class="modal fade" id="altEditor-modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 style="padding-top: 1rem;padding-left: 1rem;" class="modal-title"></h4><button style="margin: initial;" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><p></p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><input type="submit" form="altEditor-form" class="btn btn-primary"></input></div></div></div></div>'),a.button("edit:name")&&(a.button("edit:name").action(function(t,o,a,l){e._openEditModal()}),t(o).on("click","#editRowBtn",function(t){e._inputValidation()&&(t.preventDefault(),t.stopPropagation(),e._editRowData())})),a.button("delete:name")&&(a.button("delete:name").action(function(t,o,a,l){e._openDeleteModal()}),t(o).on("click","#deleteRowBtn",function(o){o.preventDefault(),o.stopPropagation(),e._deleteRow(),t(this).prop("disabled",!0)})),a.button("add:name")&&(a.button("add:name").action(function(t,o,a,l){e._openAddModal()}),t(o).on("click","#addRowBtn",function(t){e._inputValidation()&&(t.preventDefault(),t.stopPropagation(),e._addRowData())})),this.s.dt.button("refresh:name")&&this.s.dt.button("refresh:name").action(function(t,e,o,a){e.ajax&&e.ajax.url()&&e.ajax.reload()})},_emitEvent:function(e,o){this.s.dt.iterator("table",function(a,l){t(a.nTable).triggerHandler(e+".dt",o)})},_openEditModal:function(){var e=this,o=this.s.dt,a=[];for(var l in o.context[0].aoColumns){var n=o.context[0].aoColumns[l];a[l]={title:n.sTitle,name:n.data?n.data:n.mData,type:n.type?n.type:"text",options:n.options?n.options:[],msg:n.errorMsg?n.errorMsg:"",hoverMsg:n.hoverMsg?n.hoverMsg:"",pattern:n.pattern?n.pattern:".*",special:n.special?n.special:"",unique:!!n.unique&&n.unique,uniqueMsg:n.uniqueMsg?n.uniqueMsg:"",maxLength:!!n.maxLength&&n.maxLength,multiple:!!n.multiple&&n.multiple,select2:!!n.select2&&n.select2}}var i=o.rows({selected:!0}),d="";d+="<form name='altEditor-form' role='form'>";for(var r in a)if(a[r].type.includes("hidden"))d+="<input type='hidden' id='"+a[r].name+"' value='"+i.data()[0][a[r].name]+"'></input>";else{if(d+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'>",d+="<div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'>",d+="<label for='"+a[r].title+"'>"+a[r].title+":</label></div>",d+="<div class='col-sm-8 col-md-8 col-lg-8'>",a[r].type.includes("text")&&(d+="<input type='"+e._quoteattr(a[r].type)+"' id='"+e._quoteattr(a[r].name)+"'  pattern='"+e._quoteattr(a[r].pattern)+"'  title='"+e._quoteattr(a[r].hoverMsg)+"' name='"+e._quoteattr(a[r].title)+"' placeholder='"+e._quoteattr(a[r].title)+"' data-special='"+e._quoteattr(a[r].special)+"' data-errorMsg='"+e._quoteattr(a[r].msg)+"' data-uniqueMsg='"+e._quoteattr(a[r].uniqueMsg)+"' data-unique='"+a[r].unique+"'"+(0==a[r].maxLength?"":" maxlength='"+a[r].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value='"+e._quoteattr(i.data()[0][a[r].name])+"'>",d+="<label id='"+a[r].name+"label' class='errorLabel'></label>"),a[r].type.includes("readonly")&&(d+="<input type='text' readonly  id='"+a[r].name+"' name='"+a[r].title+"' placeholder='"+a[r].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value='"+i.data()[0][a[r].name]+"'>"),a[r].type.includes("select")){var s="";for(l=0;l<a[r].options.length;l++)i.data()[0][a[r].name].includes(a[r].options[l])?s+="<option value='"+a[r].options[l]+"'selected>"+a[r].options[l]+"</option>":s+="<option value='"+a[r].options[l]+"'>"+a[r].options[l]+"</option>";d+="<select class='form-control"+(a[r].select2?" select2":"")+"' id='"+a[r].name+"' name='"+a[r].title+"' "+(a[r].multiple?"multiple":"")+">"+s+"</select>"}d+="</div><div style='clear:both;'></div></div>"}d+="</form>",t("#altEditor-modal").on("show.bs.modal",function(){t("#altEditor-modal").find(".modal-title").html("Edit Record"),t("#altEditor-modal").find(".modal-body").html(d),t("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" data-content="remove" class="btn btn-primary" id="editRowBtn">Edit</button>')}),t("#altEditor-modal").modal("show"),t("#altEditor-modal input[0]").focus();for(var r in a)a[r].select2&&t("#altEditor-modal").find("select#"+a[r].name).select2(a[r].select2)},_editRowData:function(){var e=this,o=this.s.dt,a={},l=o.rows({selected:!0});t('form[name="altEditor-form"] *').filter(":input").each(function(e){a[t(this).attr("id")]=t(this).val()}),e.onEditRow({old:l.data()[0],new:a},function(t){e._updateTableCallback(t,o)})},_openDeleteModal:function(){var e=this,o=this.s.dt,a=[];for(var l in o.context[0].aoColumns)a.push({title:o.context[0].aoColumns[l].sTitle,type:o.context[0].aoColumns[l].type?o.context[0].aoColumns[l].type:"text",name:o.context[0].aoColumns[l].data?o.context[0].aoColumns[l].data:o.context[0].aoColumns[l].mData});var n=o.rows({selected:!0}),i="";i+="<form name='altEditor-form' role='form'>";for(var d in a)a[d].type.includes("hidden")?i+="<input type='hidden' id='"+a[d].title+"' value='"+n.data()[0][a[d].name]+"'></input>":i+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><label for='"+e._quoteattr(a[d].title)+"'>"+a[d].title+" :  </label><input  type='hidden'  id='"+e._quoteattr(a[d].title)+"' name='"+e._quoteattr(a[d].title)+"' placeholder='"+e._quoteattr(a[d].title)+"' style='overflow:hidden'  class='form-control' value='"+e._quoteattr(n.data()[0][a[d].name])+"' >"+n.data()[0][a[d].name]+"</input></div>";i+="</form>",t("#altEditor-modal").on("show.bs.modal",function(){t("#altEditor-modal").find(".modal-title").html("Delete Record"),t("#altEditor-modal").find(".modal-body").html(i),t("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-danger" id="deleteRowBtn">Delete</button>')}),t("#altEditor-modal").modal("show"),t("#altEditor-modal input[0]").focus()},_deleteRow:function(){for(var t=this,e=this.s.dt,o={},a=e.rows({selected:!0}),l=0;l<e.context[0].aoColumns.length;l++)o[e.context[0].aoColumns[l].id]=a.data()[0][e.context[0].aoColumns[l].data];t.onDeleteRow(o,function(o){t._updateTableCallback(o,e)})},_openAddModal:function(){var e=this,o=this.s.dt,a=[];for(var l in o.context[0].aoColumns){var n=o.context[0].aoColumns[l];a[l]={title:n.sTitle,name:n.data?n.data:n.mData,type:n.type?n.type:"text",options:n.options?n.options:[],msg:n.errorMsg?n.errorMsg:"",hoverMsg:n.hoverMsg?n.hoverMsg:"",pattern:n.pattern?n.pattern:".*",special:n.special?n.special:"",unique:!!n.unique&&n.unique,uniqueMsg:n.uniqueMsg?n.uniqueMsg:"",maxLength:!!n.maxLength&&n.maxLength,multiple:!!n.multiple&&n.multiple,select2:!!n.select2&&n.select2}}var i="";i+="<form name='altEditor-form' role='form'>";for(var d in a)if(a[d].type.includes("hidden"));else{if(i+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'><label for='"+a[d].title+"'>"+a[d].title+":</label></div><div class='col-sm-8 col-md-8 col-lg-8'>",a[d].type.includes("text")&&(i+="<input type='"+e._quoteattr(a[d].type)+"' id='"+e._quoteattr(a[d].name)+"'  pattern='"+e._quoteattr(a[d].pattern)+"'  title='"+e._quoteattr(a[d].hoverMsg)+"' name='"+e._quoteattr(a[d].title)+"' placeholder='"+e._quoteattr(a[d].title)+"' data-special='"+a[d].special+"' data-errorMsg='"+e._quoteattr(a[d].msg)+"' data-uniqueMsg='"+e._quoteattr(a[d].uniqueMsg)+"' data-unique='"+a[d].unique+"'"+(0==a[d].maxLength?"":" maxlength='"+a[d].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value=''>",i+="<label id='"+e._quoteattr(a[d].name)+"label' class='errorLabel'></label>"),a[d].type.includes("readonly")&&(i+="<input type='text' readonly  id='"+e._quoteattr(a[d].name)+"' name='"+e._quoteattr(a[d].title)+"' placeholder='"+e._quoteattr(a[d].title)+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>"),a[d].type.includes("select")){var r="";for(l=0;l<a[d].options.length;l++)r+="<option value='"+e._quoteattr(a[d].options[l])+"'>"+a[d].options[l]+"</option>";i+="<select class='form-control"+(a[d].select2?" select2":"")+"' id='"+e._quoteattr(a[d].name)+"' name='"+e._quoteattr(a[d].title)+"' "+(a[d].multiple?"multiple":"")+">"+r+"</select>"}i+="</div><div style='clear:both;'></div></div>"}i+="</form>",t("#altEditor-modal").on("show.bs.modal",function(){t("#altEditor-modal").find(".modal-title").html("Add Record"),t("#altEditor-modal").find(".modal-body").html(i),t("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-primary" id="addRowBtn">Add</button>')}),t("#altEditor-modal").modal("show"),t("#altEditor-modal input[0]").focus();for(var d in a)a[d].select2&&t("#altEditor-modal").find("select#"+a[d].name).select2(a[d].select2)},_addRowData:function(){var e=this,o=this.s.dt,a={};t('form[name="altEditor-form"] *').filter(":input").each(function(e){a[t(this).attr("id")]=t(this).val()}),e.onAddRow(a,function(t){e._updateTableCallback(t,o)})},_updateTableCallback:function(e,o){if(null==e||""==e||200==e.status||e.success){t("#altEditor-modal .modal-body .alert").remove();var a='<div class="alert alert-success" role="alert"><strong>Success!</strong></div>';t("#altEditor-modal .modal-body").append(a),o.ajax&&o.ajax.url()&&o.ajax.reload(),t("div#altEditor-modal").find("button#addRowBtn").prop("disabled",!0),t("div#altEditor-modal").find("button#editRowBtn").prop("disabled",!0),t("div#altEditor-modal").find("button#deleteRowBtn").prop("disabled",!0)}else{var l=e;t("#altEditor-modal .modal-body .alert").remove();var n="There was an unknown error!";if(l.responseJSON&&l.responseJSON.errors){n="";for(var i in l.responseJSON.errors)n+=l.responseJSON.errors[i][0]}a='<div class="alert alert-danger" role="alert"><strong>Error!</strong> '+(null==l.status?"":"Response code: "+l.status)+" "+n+"</div>";t("#altEditor-modal .modal-body").append(a)}},_inputValidation:function(){var e=this.s.dt,o=!1,a=0;return t('form[name="altEditor-form"] *').filter(":text").each(function(o){var l="#"+t(this).attr("id")+"label";if(t(l).hide(),t(l).empty(),t(this).val().match(t(this).attr("pattern"))){if("true"==t(this).attr("data-unique")){var n=e.column("th:contains('"+t(this).attr("name")+"')").data(),i=null;null!=e.row({selected:!0}).index()&&(i=e.cell(e.row({selected:!0}).index(),e.column("th:contains('"+t(this).attr("name")+"')").index()).data());for(var d in n)t(this).val()==n[d]&&n[d]!=i&&(t(l).html(t(this).attr("data-uniqueMsg")),t(l).show(),a++)}}else t(l).html(t(this).attr("data-errorMsg")),t(l).show(),a++}),0==a&&(o=!0),o},_quoteattr:function(t,e){return e=e?"&#13;":"\n",(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,e).replace(/[\r\n]/g,e)}}),i.version="2.0",i.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null},i.classes={btn:"btn"},t(o).on("preInit.dt.altEditor",function(e,o,a){if("dt"===e.namespace){var n=o.oInit.altEditor,d=l.defaults.altEditor;if(n||d){var r=t.extend({},n,d);!1!==n&&new i(o,r)}}}),l.altEditor=i,i});